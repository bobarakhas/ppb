(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{1009:function(e,t,n){"use strict";var o=n(18),r=n.n(o),a=n(3),s=n.n(a),i=n(0),d=n.n(i),c=n(53),p=n(1089),l=n(44),u=n(914),m=n(1),g=n(5);class h extends d.a.Component{constructor(){super(...arguments),s()(this,"handleAddAddress",()=>{var{env:e="",validateAmount:t=(()=>{})}=this.props;(e!==g.d.DONATE||t())&&this.props.dispatch(l.j({show:!0}))}),s()(this,"handleSelectAddress",e=>{var{onAddressChanged:t=(()=>{}),validateAmount:n=(()=>{}),dispatch:o,env:r=""}=this.props;(r!==g.d.DONATE||n())&&(o(u.c(e)),t(e))})}render(){var e=this.props.env===g.d.DONATE,t=e?"mailingAddress":"shippingAddress",n="label.your".concat(e?"Mailing":"Shipping","Address"),o="label.addNew".concat(e?"Mailing":"Shipping","Address");return d.a.createElement(p.a,r()({},this.props,{handleAddAddress:this.handleAddAddress,handleSelectAddress:this.handleSelectAddress,selectElementId:t,yourAddressContentKey:n,addNewAddressContentKey:o,shouldRenderLabel:!0,hasNoAddressNeededOption:this.props.hasNoAddressNeededOption}))}}s()(h,"defaultProps",{hasNoAddressNeededOption:!0,handleSelectAddress:()=>{}}),t.a=Object(c.b)((e,t)=>{var n,o,r,a,{address:s,server:i,recipient:d,transaction:c}=e,{hasNoAddressNeededOption:p}=t;return{addressEntryFormat:s.addressEntryFormat,addresses:s.addresses,selectedAddress:s.selectedShippingAddress,env:i.env,dir:i.directionality,hasNoAddressNeededOption:(n=p,o=i.env,r=c.shippingType,a=d.isCharity,o===g.d.DONATE?n:(o!==m.q.PPSHOPS||r!==g.q.FLAT_RATE&&r!==g.q.FREE)&&!a)}})(h)},1010:function(e,t,n){"use strict";var o=n(16).h.div({border:0,borderTop:"1px solid #dedede !important",maxWidth:444,margin:"0 auto",padding:0,height:0});t.a=o},1096:function(e,t,n){"use strict";(function(e){t.a={initializeHook(){e("html").addClass("outlookWrap"),e("#footer a").attr("target","_blank")}}}).call(this,n(28))},999:function(e,t,n){"use strict";n.r(t);var o=n(1096),r=n(64),a={sessionTimerOverlayRenderedHook(){Object(r.postMessageUp)({statusMessage:"sessionTimerOverlayRendered"})},previewPageSendSubmitHook(){Object(r.postMessageUp)({statusMessage:"previewPageSendAction"})},successPageAfterRenderHook(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"PENDING"!==e.complianceInfo.status&&Object(r.postMessageUp)({statusMessage:"successPageRendered",data:{name:e.displayName,amount:e.amountFormatted}})},loadingStateChangedHook(e){var{isLoading:t}=e;Object(r.postMessageUp)({toggleLoading:t})}},s=n(8),i=n.n(s),d=n(14),c={sessionTimerOverlayRenderedHook(){Object(r.postMessageUp)({statusMessage:"sessionTimerOverlayRendered"})},previewPageSendSubmitHook(){Object(r.postMessageUp)({statusMessage:"previewPageSendAction"})},noCurrencyBalanceErrorHook(){Object(r.postMessageUp)({statusMessage:"noCurrencyBalanceError",toggleLoading:!1})},successPageAfterRenderHook(){var e=d.default.getState(),t=i()(e,"transaction.complianceInfo.status"),n=i()(e,"transaction.paymentDetails.payment_id");"PENDING"!==t&&Object(r.postMessageUp)({statusMessage:"successPageRendered",data:{amount:e.amount.amount,paymentId:n,currency:e.amount.currencyCode,amountFormatted:e.amount.amountFormatted,note:e.note.note}})},loadingStateChangedHook(e){var{isLoading:t}=e;Object(r.postMessageUp)({toggleLoading:t})}},p={initializeHook(){window.s&&(window.s.pageName="main:consumer:p2p:transfer:xb:review")}},l=n(0),u=n.n(l),m=n(7),g=n(3),h=n.n(g),O=n(17),b=n(53),y=n(1009),A=n(9),v=n(31),f=n(1),E=O.a.create({addressWrapper:{padding:"0px 28px 0px"},toolCheckboxWrapper:{position:"absolute",width:"inherit",display:"inline"},inputCheckBox:{width:25,height:20},toolCheckbox:{":before":{overflow:"hidden",height:"1em",width:"1em",padding:"0.3em 0em"}},addressContent:{margin:"0 0 0 40px",display:"inline-block"},srLabel:{position:"absolute",width:1,height:1,overflow:"hidden"},tipIcon:{color:"#005EA6",cursor:"pointer",textDecoration:"none",width:0,height:0,padding:0},toolTipTxt:{backgroundColor:"#e1e7eb",fontSize:12,lineHeight:1.8,textAlign:"left",borderRadius:6,padding:"5px 7px",display:"block"}}),x=n(47),M=Object(A.a)("transfer/inc/donateDropdown");class j extends u.a.Component{constructor(){super(...arguments),h()(this,"validateAmount",()=>Object(v.d)(this.props.amount,this.props.currencyDecimal)?(this.props.dispatch({type:f.d.EXTERNAL.SHOW_AMOUNT_IS_ZERO_ERROR}),!1):Object(v.a)(this.props.isAmountReadOnly,this.props.amount,this.props.donationContext.minimum_amount,this.props.currencyCode)?!!Object(v.b)(this.props.isAmountReadOnly,this.props.amount,this.props.donationContext.maximum_amount,this.props.currencyCode)||(this.props.dispatch({type:f.d.EXTERNAL.SHOW_AMOUNT_DONATION_ERROR,data:f.m.AMOUNT_ABOVE_MAXIMUM}),!1):(this.props.dispatch({type:f.d.EXTERNAL.SHOW_AMOUNT_DONATION_ERROR,data:f.m.AMOUNT_BELOW_MINIMUM}),!1)),h()(this,"reFetchFundingOptions",()=>{this.validateAmount()&&this.props.dispatch(x.e())})}render(){return this.props.shippingRequired?u.a.createElement("div",{className:Object(O.b)(E.addressWrapper)},u.a.createElement("div",{className:"donate-mailing-address ".concat(Object(O.b)(Object(O.c)(E.addressContent)))},u.a.createElement(y.a,{hasNoAddressNeededOption:!1,onAddressChanged:this.reFetchFundingOptions,validateAmount:this.validateAmount})),u.a.createElement("div",{className:"donate-mailing-address-helper-text ".concat(Object(O.b)(Object(O.c)(E.addressContent)))},u.a.createElement("span",null,M("label.helperText")))):null}}var w=Object(b.b)(e=>{var{external:t,amount:n,server:o}=e;return{shippingRequired:t.shippingRequired,shareAddress:t.shareAddress,amount:n.amount,currencyCode:n.currencyCode,currencyDecimal:n.currencyDecimal,isAmountReadOnly:!!t.isAmountReadOnly,dir:o.directionality,donationContext:t.donationContext}})(j),R=n(266);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=Object(A.a)("transfer/inc/amount"),T={error:{color:"grey700",fontSize:"13px"},criticalIcon:{color:"#D20000",position:"relative",top:"-2px",height:13.18,width:14.83}};class D extends l.Component{render(){if(this.props.donationValidationType===f.m.AMOUNT_VALID)return null;var e="errorText.minimumDonationUS",t="1.00",n="USD";this.props.donationValidationType===f.m.AMOUNT_ABOVE_MAXIMUM?(t=i()(this.props.donationContext,"maximum_amount.value"),n=i()(this.props.donationContext,"maximum_amount.currency"),e="errorText.maximumDonation"):(t=i()(this.props.donationContext,"minimum_amount.value","1.00"),"USD"===(n=i()(this.props.donationContext,"minimum_amount.currency","USD"))&&Number(t)<1&&(t="1.00"),e="errorText.minimumDonationUS");var o=Object(R.a)(t,n,"CURRENCY_FORMAT");return u.a.createElement("span",null,u.a.createElement("span",{className:"icon icon-critical-small",style:C({},T.criticalIcon),"aria-hidden":"true"}),u.a.createElement("span",{className:"vx_text-3",style:T.error},S(e,{amount:o})))}}var P=Object(b.b)(e=>{var{external:t}=e;return{donationValidationType:t.donationValidationType,donationContext:t.donationContext}})(D),U=n(68);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=Object(A.a)("transfer/inc/note"),H={errorField:{textAlign:"left",paddingLeft:"10px"},errorText:{color:"#687173",fontSize:"14px"},criticalIcon:{color:"#D20000",marginRight:"0.75rem",verticalAlign:"bottom"}};var L=Object(b.b)(e=>{var{external:t}=e;return{showNoteMaxCharLimitError:t.showNoteMaxCharLimitError}})((function(e){return e.showNoteMaxCharLimitError?u.a.createElement("div",{style:_({},H.errorField)},u.a.createElement("span",null,u.a.createElement(U.yb,{name:"critical-alt",size:"xs",style:_({},H.criticalIcon)}),u.a.createElement("span",{role:"alert","data-testid":"note-field-error",style:H.errorText},I("note.errorMaxCharacterLimit")))):null})),F=n(1010),q=n(5),W={customComponents:[{page:"preview",position:"before:userAgreement",component:u.a.createElement(w,null)},{page:"send-amount-field",position:"after:firstTimeHelp",component:u.a.createElement(F.a,null)},{page:"send-amount-field",position:"before:firstTimeHelp",component:u.a.createElement(P,null)},{page:"note-with-gift",position:"after:note",component:u.a.createElement(L,null)}],initializeHook(){m.overrideEnvironment(q.d.DONATE)},loadingStateChangedHook(e){var{isLoading:t}=e;t?Object(r.postMessageUp)({toggleLoading:t}):Object(r.postMessageUp)({statusMessage:"fundingOptionsRendered"})},sessionTimerOverlayRenderedHook(){Object(r.postMessageUp)({statusMessage:"sessionTimerOverlayRendered"})},showAddNewFIHook(){Object(r.postMessageUp)({statusMessage:"addNewFIRendered"})},previewPageAfterRenderHook(){Object(r.postMessageUp)({statusMessage:"fundingOptionsRendered"})},previewPageSendSubmitHook(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{amount:t={},external:n={},donate:o={},transaction:a={},address:{selectedShippingAddress:{id:s}}}=d.default.getState()||{},i=t.amount,c=t.currencyCode,p=n.donationGiftAidCheckbox,l=o.donationAnonymousStatus,u=n.selectedRecurringFrequency,{cvv:m,threeDS2ReferenceId:g,threeDS2TransactionId:h}=a,{isRecurring:O,recipient:b,selectedFundingOption:y}=e;Object(r.postMessageUp)({statusMessage:"previewPageSendAction",data:{isRecurring:O,recipient:b,selectedFundingOption:y,selectedShippingAddressId:s,giftAidItFlag:p,donatedAmount:i,currencyCode:c,threeDS2ReferenceId:g,threeDS2TransactionId:h,cvv:m,donationAnonymousStatus:l,selectedRecurringFrequency:u}})},successPageAfterRenderHook(){var e,t,n,{paymentDetails:o={},selectedFundingOption:a={}}=d.default.getState().transaction,{amount:s={},external:i={}}=d.default.getState()||{},c=s.amount,p=s.currencyCode,l=i.donationGiftAidCheckbox||(null===(e=i.donationGiftAid)||void 0===e?void 0:e.isAlreadyEnrolled);t="successPageRendered:".concat(o.payment_id),(n=window&&window.parent||{}).postMessage&&n.location&&n.postMessage(t,"*"),Object(r.postMessageUp)({statusMessage:"successPageRendered",data:{paymentId:o.payment_id,selectedFundingOption:a,donationGiftaid:l,donatedAmount:c,currencyCode:p}})},requestUnifiedLoginHook(){Object(r.postMessageUp)({statusMessage:"requestUnifiedLogin"})}};n.d(t,"getExternalComponents",(function(){return B})),n.d(t,"hooks",(function(){return z}));var z={[q.d.OUTLOOK]:o.a,[q.d.DONATE]:W,[q.d.PP_ME]:a,[q.d.POOLS]:c,[q.d.CROSS_BORDER]:p};function B(e,t){var n=(z[e]||{}).customComponents||[];return function(e){return n.filter(n=>n.page===t&&n.position===e).map(e=>e.component)[0]}}t.default=z}}]);
//# sourceMappingURL=73.esm.js.map